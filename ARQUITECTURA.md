# ğŸ—ï¸ Arquitectura del Sistema - Retail Analytics

## ğŸ“‹ Ãndice
1. [VisiÃ³n General](#visiÃ³n-general)
2. [Arquitectura de Alto Nivel](#arquitectura-de-alto-nivel)
3. [Arquitectura Frontend](#arquitectura-frontend)
4. [Arquitectura Backend](#arquitectura-backend)
5. [Arquitectura de Datos](#arquitectura-de-datos)
6. [Flujo de Datos](#flujo-de-datos)
7. [Diagrama de Despliegue](#diagrama-de-despliegue)

---

## ğŸ¯ VisiÃ³n General

### **PatrÃ³n ArquitectÃ³nico Principal: MVC (Model-View-Controller)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RETAIL ANALYTICS SYSTEM                   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            â”‚      â”‚            â”‚      â”‚             â”‚  â”‚
â”‚  â”‚   VIEW     â”‚â—„â”€â”€â”€â”€â–ºâ”‚ CONTROLLER â”‚â—„â”€â”€â”€â”€â–ºâ”‚    MODEL    â”‚  â”‚
â”‚  â”‚  (React)   â”‚      â”‚ (Express)  â”‚      â”‚  (MongoDB)  â”‚  â”‚
â”‚  â”‚            â”‚      â”‚            â”‚      â”‚             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  â€¢ Frontend SPA    â€¢ API REST      â€¢ Base de Datos NoSQL   â”‚
â”‚  â€¢ TailwindCSS     â€¢ Middleware    â€¢ Mongoose ODM           â”‚
â”‚  â€¢ Recharts        â€¢ JWT Auth      â€¢ Aggregations          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ Arquitectura de Alto Nivel

### **Diagrama de 3 Capas**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CAPA DE PRESENTACIÃ“N                       â”‚
â”‚                         (Presentation Layer)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    NAVEGADOR WEB                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚              REACT APPLICATION (SPA)                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Components:                                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Login          â€¢ Dashboard      â€¢ Products       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Sales          â€¢ Analytics      â€¢ Layout         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  State Management:                                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Context API (Auth)                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Local State (useState)                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Routing:                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ React Router DOM v6                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Protected Routes (HOC)                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Styling:                                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ TailwindCSS (Utility-first)                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Custom Components                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Visualizations:                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Recharts (8+ chart types)                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Responsive SVG charts                             â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP/HTTPS
                            â”‚ REST API Calls
                            â”‚ JSON Payload
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CAPA DE APLICACIÃ“N                            â”‚
â”‚                      (Application Layer)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 NODE.JS + EXPRESS SERVER                     â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚  Middleware Stack:                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚   Helmet   â”‚â†’â”‚    CORS    â”‚â†’â”‚   Morgan   â”‚â†’â”‚  Parser  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ (Security) â”‚ â”‚  (Policy)  â”‚ â”‚  (Logger)  â”‚ â”‚  (JSON)  â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                          â†“                                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚              AUTHENTICATION MIDDLEWARE                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Verify JWT Token                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Extract User Info                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Check Permissions                                   â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                          â†“                                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚                   API ROUTES                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  /api/auth      â†’ authRoutes                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  /api/products  â†’ productRoutes                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  /api/sales     â†’ saleRoutes                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  /api/analytics â†’ analyticsRoutes                       â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                          â†“                                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚                   CONTROLLERS                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ authController      (Login, Register, Profile)      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ productController   (CRUD Products)                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ saleController      (Create/List Sales)             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ analyticsController (KPIs, Reports, AI)             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Business Logic:                                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Validation                                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Calculations                                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Aggregations                                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Recommendations (AI)                                 â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                          â†“                                   â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚              ERROR HANDLER MIDDLEWARE                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Catch all errors                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Format error response                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Log errors                                          â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ Mongoose ODM
                             â”‚ Connection Pool
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       CAPA DE DATOS                                 â”‚
â”‚                       (Data Layer)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   MONGODB DATABASE                             â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  Database: retail_inventory                                    â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  MODELS (Mongoose Schemas)                              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  User Model:                                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ name, email, password (hashed)                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ role (admin/manager/vendedor)                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ branch                                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Methods: comparePassword(), getJwtToken()            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Product Model:                                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ name, sku, category, gender, size                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ price, cost, stock, minStock                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ color, brand, season                                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Indexes: category, gender, sku                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Sale Model:                                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ saleNumber, branch, items[]                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ totalAmount, totalCost, totalProfit                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ paymentMethod, status, saleDate                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Indexes: saleDate, branch, status                    â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  COLLECTIONS                                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  users   â”‚  â”‚ products â”‚  â”‚  sales   â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ (3 docs) â”‚  â”‚(60+ docs)â”‚  â”‚(250 docs)â”‚             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  Features:                                                     â”‚ â”‚
â”‚  â”‚  â€¢ Aggregation Pipeline (Analytics)                            â”‚ â”‚
â”‚  â”‚  â€¢ Indexes (Performance)                                       â”‚ â”‚
â”‚  â”‚  â€¢ Validation (Data Integrity)                                 â”‚ â”‚
â”‚  â”‚  â€¢ Automatic Timestamps                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Arquitectura Frontend

### **Estructura de Componentes React**

```
frontend/
â”‚
â”œâ”€â”€ src/
â”‚   â”‚
â”‚   â”œâ”€â”€ main.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Entry Point
â”‚   â”‚                              â”‚
â”‚   â”œâ”€â”€ App.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
â”‚   â”‚   â”‚                         â”‚
â”‚   â”‚   â”œâ”€â”€ AuthProvider â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€ Context API
â”‚   â”‚   â”‚                         â”‚
â”‚   â”‚   â””â”€â”€ Router                â”‚
â”‚   â”‚       â”‚                     â”‚
â”‚   â”‚       â”œâ”€â”€ Public Routes     â”‚
â”‚   â”‚       â”‚   â””â”€â”€ /login â”€â”€â”€â”€â”€â”€â–º Login.jsx
â”‚   â”‚       â”‚                     
â”‚   â”‚       â””â”€â”€ Protected Routes  
â”‚   â”‚           â”‚                 
â”‚   â”‚           â”œâ”€â”€ Layout.jsx â—„â”€â”€â”¼â”€â”€â”€ Sidebar + Header
â”‚   â”‚           â”‚   â”‚             â”‚
â”‚   â”‚           â”‚   â”œâ”€â”€ /dashboard    â”€â”€â–º Dashboard.jsx
â”‚   â”‚           â”‚   â”‚                     â”‚
â”‚   â”‚           â”‚   â”‚                     â”œâ”€â”€ KPI Cards
â”‚   â”‚           â”‚   â”‚                     â”œâ”€â”€ Top Products Chart
â”‚   â”‚           â”‚   â”‚                     â”œâ”€â”€ Gender Pie Chart
â”‚   â”‚           â”‚   â”‚                     â”œâ”€â”€ Category Chart
â”‚   â”‚           â”‚   â”‚                     â”œâ”€â”€ Branch Chart
â”‚   â”‚           â”‚   â”‚                     â””â”€â”€ Recommendations
â”‚   â”‚           â”‚   â”‚
â”‚   â”‚           â”‚   â”œâ”€â”€ /products     â”€â”€â–º Products.jsx
â”‚   â”‚           â”‚   â”‚                     â”‚
â”‚   â”‚           â”‚   â”‚                     â”œâ”€â”€ Search Bar
â”‚   â”‚           â”‚   â”‚                     â”œâ”€â”€ Filters
â”‚   â”‚           â”‚   â”‚                     â”œâ”€â”€ Product Table
â”‚   â”‚           â”‚   â”‚                     â””â”€â”€ Stats Cards
â”‚   â”‚           â”‚   â”‚
â”‚   â”‚           â”‚   â”œâ”€â”€ /sales        â”€â”€â–º Sales.jsx
â”‚   â”‚           â”‚   â”‚                     â”‚
â”‚   â”‚           â”‚   â”‚                     â”œâ”€â”€ Stats Cards
â”‚   â”‚           â”‚   â”‚                     â”œâ”€â”€ Branch Filter
â”‚   â”‚           â”‚   â”‚                     â””â”€â”€ Sales Table
â”‚   â”‚           â”‚   â”‚
â”‚   â”‚           â”‚   â””â”€â”€ /analytics    â”€â”€â–º Analytics.jsx
â”‚   â”‚                                     â”‚
â”‚   â”‚                                     â”œâ”€â”€ Top Products Chart
â”‚   â”‚                                     â”œâ”€â”€ Sales Trend Chart
â”‚   â”‚                                     â”œâ”€â”€ Gender Analysis
â”‚   â”‚                                     â”œâ”€â”€ Category Analysis
â”‚   â”‚                                     â”œâ”€â”€ Size Analysis
â”‚   â”‚                                     â””â”€â”€ Branch Performance
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ Layout.jsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Reusable UI Shell
â”‚   â”‚
â”‚   â”œâ”€â”€ context/
â”‚   â”‚   â””â”€â”€ AuthContext.jsx â”€â”€â”€â”€â”€â–º Global State Management
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ State:
â”‚   â”‚       â”‚   â”œâ”€â”€ user
â”‚   â”‚       â”‚   â”œâ”€â”€ loading
â”‚   â”‚       â”‚   â””â”€â”€ isAuthenticated
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ Actions:
â”‚   â”‚           â”œâ”€â”€ login()
â”‚   â”‚           â”œâ”€â”€ logout()
â”‚   â”‚           â””â”€â”€ register()
â”‚   â”‚
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ api.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º API Client (Axios)
â”‚           â”‚
â”‚           â”œâ”€â”€ Interceptors:
â”‚           â”‚   â”œâ”€â”€ Request  (Add JWT Token)
â”‚           â”‚   â””â”€â”€ Response (Handle 401)
â”‚           â”‚
â”‚           â””â”€â”€ Repositories:
â”‚               â”œâ”€â”€ authAPI
â”‚               â”œâ”€â”€ productsAPI
â”‚               â”œâ”€â”€ salesAPI
â”‚               â””â”€â”€ analyticsAPI
```

### **Flujo de Estado en Frontend**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              USER INTERACTION                            â”‚
â”‚   (Click, Type, Submit, etc)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              EVENT HANDLER                               â”‚
â”‚   (onClick, onChange, onSubmit)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API CALL                                    â”‚
â”‚   api.get/post/put/delete()                             â”‚
â”‚   â†’ Add JWT Token (Interceptor)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              BACKEND RESPONSE                            â”‚
â”‚   { success: true, data: {...} }                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STATE UPDATE                                â”‚
â”‚   setState(newData)                                     â”‚
â”‚   setContext(newValue)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RE-RENDER                                   â”‚
â”‚   React Virtual DOM Update                              â”‚
â”‚   â†’ Only changed components                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              UI UPDATE                                   â”‚
â”‚   User sees new data                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš™ï¸ Arquitectura Backend

### **Estructura de Capas**

```
backend/
â”‚
â”œâ”€â”€ server.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Entry Point
â”‚   â”‚
â”‚   â”œâ”€â”€ Connect Database
â”‚   â”œâ”€â”€ Initialize Express
â”‚   â”œâ”€â”€ Apply Middleware Stack
â”‚   â”œâ”€â”€ Register Routes
â”‚   â””â”€â”€ Start Server (Port 5000)
â”‚
â”œâ”€â”€ config/
â”‚   â””â”€â”€ database.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º MongoDB Connection
â”‚       â”‚                         (Singleton Pattern)
â”‚       â””â”€â”€ mongoose.connect()
â”‚
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ auth.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Authentication
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ isAuthenticated():
â”‚   â”‚   â”‚   â”œâ”€â”€ Extract JWT from header
â”‚   â”‚   â”‚   â”œâ”€â”€ Verify token
â”‚   â”‚   â”‚   â”œâ”€â”€ Find user
â”‚   â”‚   â”‚   â””â”€â”€ Attach user to req
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ authorizeRoles():
â”‚   â”‚       â””â”€â”€ Check user.role
â”‚   â”‚
â”‚   â””â”€â”€ errorHandler.js â”€â”€â”€â”€â”€â”€â”€â–º Error Management
â”‚       â”‚
â”‚       â”œâ”€â”€ CastError (404)
â”‚       â”œâ”€â”€ DuplicateKey (400)
â”‚       â”œâ”€â”€ ValidationError (400)
â”‚       â””â”€â”€ Generic (500)
â”‚
â”œâ”€â”€ routes/ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Route Definitions
â”‚   â”‚
â”‚   â”œâ”€â”€ authRoutes.js
â”‚   â”‚   â”œâ”€â”€ POST /api/auth/register
â”‚   â”‚   â”œâ”€â”€ POST /api/auth/login
â”‚   â”‚   â””â”€â”€ GET  /api/auth/me (Protected)
â”‚   â”‚
â”‚   â”œâ”€â”€ productRoutes.js
â”‚   â”‚   â”œâ”€â”€ GET    /api/products (Protected)
â”‚   â”‚   â”œâ”€â”€ GET    /api/products/:id (Protected)
â”‚   â”‚   â”œâ”€â”€ POST   /api/products (Protected + Admin)
â”‚   â”‚   â”œâ”€â”€ PUT    /api/products/:id (Protected + Admin)
â”‚   â”‚   â”œâ”€â”€ DELETE /api/products/:id (Protected + Admin)
â”‚   â”‚   â””â”€â”€ GET    /api/products/alerts/low-stock (Protected)
â”‚   â”‚
â”‚   â”œâ”€â”€ saleRoutes.js
â”‚   â”‚   â”œâ”€â”€ GET  /api/sales (Protected)
â”‚   â”‚   â”œâ”€â”€ POST /api/sales (Protected)
â”‚   â”‚   â””â”€â”€ GET  /api/sales/:id (Protected)
â”‚   â”‚
â”‚   â””â”€â”€ analyticsRoutes.js
â”‚       â”œâ”€â”€ GET /api/analytics/dashboard (Protected)
â”‚       â”œâ”€â”€ GET /api/analytics/top-products (Protected)
â”‚       â”œâ”€â”€ GET /api/analytics/by-category (Protected)
â”‚       â”œâ”€â”€ GET /api/analytics/by-gender (Protected)
â”‚       â”œâ”€â”€ GET /api/analytics/by-size (Protected)
â”‚       â”œâ”€â”€ GET /api/analytics/by-branch (Protected)
â”‚       â”œâ”€â”€ GET /api/analytics/sales-trend (Protected)
â”‚       â””â”€â”€ GET /api/analytics/recommendations (Protected)
â”‚
â”œâ”€â”€ controllers/ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Business Logic
â”‚   â”‚
â”‚   â”œâ”€â”€ authController.js
â”‚   â”‚   â”œâ”€â”€ register() â”€â”€â”€â”€â”€â”€â–º Create user + hash password + JWT
â”‚   â”‚   â”œâ”€â”€ login() â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Verify credentials + JWT
â”‚   â”‚   â””â”€â”€ getProfile() â”€â”€â”€â”€â–º Return user data
â”‚   â”‚
â”‚   â”œâ”€â”€ productController.js
â”‚   â”‚   â”œâ”€â”€ getProducts() â”€â”€â”€â–º List with filters
â”‚   â”‚   â”œâ”€â”€ getProductById()
â”‚   â”‚   â”œâ”€â”€ createProduct()
â”‚   â”‚   â”œâ”€â”€ updateProduct()
â”‚   â”‚   â”œâ”€â”€ deleteProduct()
â”‚   â”‚   â””â”€â”€ getLowStockProducts()
â”‚   â”‚
â”‚   â”œâ”€â”€ saleController.js
â”‚   â”‚   â”œâ”€â”€ getSales() â”€â”€â”€â”€â”€â”€â–º List with filters
â”‚   â”‚   â”œâ”€â”€ createSale() â”€â”€â”€â”€â–º Create + update stock
â”‚   â”‚   â””â”€â”€ getSaleById()
â”‚   â”‚
â”‚   â””â”€â”€ analyticsController.js
â”‚       â”œâ”€â”€ getDashboard() â”€â”€â”€â”€â”€â”€â–º KPIs calculation
â”‚       â”œâ”€â”€ getTopProducts() â”€â”€â”€â”€â–º Aggregation query
â”‚       â”œâ”€â”€ getByCategory() â”€â”€â”€â”€â”€â–º GROUP BY category
â”‚       â”œâ”€â”€ getByGender() â”€â”€â”€â”€â”€â”€â”€â–º GROUP BY gender
â”‚       â”œâ”€â”€ getBySize() â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º GROUP BY size
â”‚       â”œâ”€â”€ getByBranch() â”€â”€â”€â”€â”€â”€â”€â–º GROUP BY branch
â”‚       â”œâ”€â”€ getSalesTrend() â”€â”€â”€â”€â”€â–º Time series
â”‚       â””â”€â”€ getRecommendations() â–º AI algorithms
â”‚
â””â”€â”€ models/ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Data Models
    â”‚
    â”œâ”€â”€ User.js
    â”‚   â”œâ”€â”€ Schema:
    â”‚   â”‚   â”œâ”€â”€ name, email, password
    â”‚   â”‚   â”œâ”€â”€ role, branch, active
    â”‚   â”‚   â””â”€â”€ timestamps
    â”‚   â”‚
    â”‚   â”œâ”€â”€ Pre-save Hook:
    â”‚   â”‚   â””â”€â”€ Hash password (bcrypt)
    â”‚   â”‚
    â”‚   â””â”€â”€ Methods:
    â”‚       â”œâ”€â”€ comparePassword()
    â”‚       â””â”€â”€ getJwtToken()
    â”‚
    â”œâ”€â”€ Product.js
    â”‚   â”œâ”€â”€ Schema:
    â”‚   â”‚   â”œâ”€â”€ name, sku, category
    â”‚   â”‚   â”œâ”€â”€ gender, size, price
    â”‚   â”‚   â”œâ”€â”€ cost, stock, minStock
    â”‚   â”‚   â””â”€â”€ timestamps
    â”‚   â”‚
    â”‚   â””â”€â”€ Indexes:
    â”‚       â”œâ”€â”€ { category: 1, gender: 1 }
    â”‚       â”œâ”€â”€ { sku: 1 }
    â”‚       â””â”€â”€ { stock: 1 }
    â”‚
    â””â”€â”€ Sale.js
        â”œâ”€â”€ Schema:
        â”‚   â”œâ”€â”€ saleNumber, branch
        â”‚   â”œâ”€â”€ items[] (embedded)
        â”‚   â”œâ”€â”€ totalAmount, totalProfit
        â”‚   â”œâ”€â”€ paymentMethod, status
        â”‚   â””â”€â”€ saleDate
        â”‚
        â””â”€â”€ Indexes:
            â”œâ”€â”€ { saleDate: -1 }
            â”œâ”€â”€ { branch: 1, saleDate: -1 }
            â””â”€â”€ { 'items.category': 1 }
```

### **Pipeline de Request**

```
1. HTTP Request
   â”‚
   â”œâ”€â”€ Method: GET/POST/PUT/DELETE
   â”œâ”€â”€ URL: /api/products
   â”œâ”€â”€ Headers: Authorization: Bearer <JWT>
   â””â”€â”€ Body: { data }
   
   â†“
   
2. Express Middleware Stack
   â”‚
   â”œâ”€â”€ helmet() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Security headers
   â”œâ”€â”€ cors() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º CORS policy
   â”œâ”€â”€ morgan() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Request logging
   â”œâ”€â”€ express.json() â”€â”€â”€â”€â–º Parse JSON body
   â”‚
   â†“
   
3. Authentication Middleware
   â”‚
   â”œâ”€â”€ Extract JWT from header
   â”œâ”€â”€ Verify JWT signature
   â”œâ”€â”€ Decode user ID
   â”œâ”€â”€ Find user in database
   â””â”€â”€ Attach user to req.user
   
   â†“
   
4. Authorization Middleware (if needed)
   â”‚
   â””â”€â”€ Check if user.role in allowedRoles
   
   â†“
   
5. Route Handler
   â”‚
   â””â”€â”€ Match URL pattern
   
   â†“
   
6. Controller Function
   â”‚
   â”œâ”€â”€ Validate input
   â”œâ”€â”€ Business logic
   â”œâ”€â”€ Database query (Model)
   â””â”€â”€ Return response
   
   â†“
   
7. Response
   â”‚
   â”œâ”€â”€ Status: 200/201/400/404/500
   â”œâ”€â”€ Headers: Content-Type, etc
   â””â”€â”€ Body: { success, data/message }
   
   â†“
   
8. Error Handler (if error occurs)
   â”‚
   â”œâ”€â”€ Catch error
   â”œâ”€â”€ Format error message
   â”œâ”€â”€ Log error
   â””â”€â”€ Send error response
```

---

## ğŸ’¾ Arquitectura de Datos

### **Modelo Entidad-RelaciÃ³n (Conceptual)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       USER          â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ _id: ObjectId (PK)  â”‚
â”‚ name: String        â”‚
â”‚ email: String (UK)  â”‚
â”‚ password: String    â”‚
â”‚ role: Enum          â”‚
â”‚ branch: String      â”‚
â”‚ active: Boolean     â”‚
â”‚ createdAt: Date     â”‚
â”‚ updatedAt: Date     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Created by (metadata)
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      PRODUCT        â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ _id: ObjectId (PK)  â”‚
â”‚ name: String        â”‚
â”‚ sku: String (UK)    â”‚
â”‚ category: Enum      â”‚
â”‚ gender: Enum        â”‚
â”‚ size: Enum          â”‚
â”‚ price: Number       â”‚
â”‚ cost: Number        â”‚
â”‚ stock: Number       â”‚
â”‚ minStock: Number    â”‚
â”‚ color: String       â”‚
â”‚ brand: String       â”‚
â”‚ season: Enum        â”‚
â”‚ active: Boolean     â”‚
â”‚ createdAt: Date     â”‚
â”‚ updatedAt: Date     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Referenced in
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       SALE          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤    SALE ITEM        â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ 1     * â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ _id: ObjectId (PK)  â”‚         â”‚ product: ObjectId   â”‚
â”‚ saleNumber: String  â”‚         â”‚ sku: String         â”‚
â”‚ branch: String      â”‚         â”‚ name: String        â”‚
â”‚ items: [SaleItem]   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ category: String    â”‚
â”‚ totalAmount: Number â”‚         â”‚ gender: String      â”‚
â”‚ totalCost: Number   â”‚         â”‚ size: String        â”‚
â”‚ totalProfit: Number â”‚         â”‚ quantity: Number    â”‚
â”‚ paymentMethod: Enum â”‚         â”‚ unitPrice: Number   â”‚
â”‚ status: Enum        â”‚         â”‚ unitCost: Number    â”‚
â”‚ saleDate: Date      â”‚         â”‚ subtotal: Number    â”‚
â”‚ customer: Object    â”‚         â”‚ profit: Number      â”‚
â”‚ createdAt: Date     â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ updatedAt: Date     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Esquemas MongoDB (FÃ­sico)**

```javascript
// User Collection
{
  _id: ObjectId("507f1f77bcf86cd799439011"),
  name: "Juliana",
  email: "admin@retail.com",
  password: "$2a$10$hashed...",
  role: "admin",
  branch: "Todas",
  active: true,
  createdAt: ISODate("2025-01-01T00:00:00Z"),
  updatedAt: ISODate("2025-01-01T00:00:00Z")
}

// Product Collection
{
  _id: ObjectId("507f1f77bcf86cd799439012"),
  name: "Jeans Skinny Azul",
  sku: "MUJ-JEA-001",
  category: "JEANS TERMINADOS",
  gender: "Mujer",
  size: "M",
  price: 129900,
  cost: 65000,
  stock: 45,
  minStock: 10,
  color: "Azul",
  brand: "Retail Brand",
  season: "Todo el aÃ±o",
  active: true,
  createdAt: ISODate("2025-01-01T00:00:00Z"),
  updatedAt: ISODate("2025-01-01T00:00:00Z")
}

// Sale Collection
{
  _id: ObjectId("507f1f77bcf86cd799439013"),
  saleNumber: "VT-0001",
  branch: "BogotÃ¡ Centro",
  items: [
    {
      product: ObjectId("507f1f77bcf86cd799439012"),
      sku: "MUJ-JEA-001",
      name: "Jeans Skinny Azul",
      category: "JEANS TERMINADOS",
      gender: "Mujer",
      size: "M",
      quantity: 2,
      unitPrice: 129900,
      unitCost: 65000,
      subtotal: 259800,
      profit: 129800
    }
  ],
  totalAmount: 259800,
  totalCost: 130000,
  totalProfit: 129800,
  paymentMethod: "Tarjeta",
  status: "Completada",
  saleDate: ISODate("2025-01-15T14:30:00Z"),
  customer: {
    name: "Cliente Demo",
    email: "cliente@example.com"
  },
  createdAt: ISODate("2025-01-15T14:30:00Z"),
  updatedAt: ISODate("2025-01-15T14:30:00Z")
}
```

---

## ğŸ”„ Flujo de Datos Completo

### **Ejemplo: Usuario ve Dashboard**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. USER                                                           â”‚
â”‚    â€¢ Abre navegador                                              â”‚
â”‚    â€¢ Navega a: https://retail-analytics.onrender.com             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. REACT APP LOADS                                               â”‚
â”‚    â€¢ index.html descargado                                       â”‚
â”‚    â€¢ JavaScript bundle ejecutado                                 â”‚
â”‚    â€¢ React renderiza App.jsx                                     â”‚
â”‚    â€¢ AuthProvider inicializa                                     â”‚
â”‚    â€¢ Router evalÃºa ruta                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. AUTHENTICATION CHECK                                          â”‚
â”‚    â€¢ AuthContext revisa localStorage                             â”‚
â”‚    â€¢ Â¿Hay token?                                                 â”‚
â”‚      â”œâ”€â–º NO  â†’ Redirect a /login                                â”‚
â”‚      â””â”€â–º SÃ  â†’ Continuar                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. DASHBOARD COMPONENT MOUNTS                                    â”‚
â”‚    â€¢ useEffect() se ejecuta                                      â”‚
â”‚    â€¢ loadDashboardData() llamado                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. API CALL (Frontend)                                           â”‚
â”‚    â€¢ analyticsAPI.getDashboard({ startDate, endDate })           â”‚
â”‚    â€¢ axios.get('/api/analytics/dashboard')                       â”‚
â”‚    â€¢ Interceptor agrega: Authorization: Bearer <JWT>             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ HTTP Request
                     â”‚ GET /api/analytics/dashboard?startDate=...
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. EXPRESS SERVER RECEIVES                                       â”‚
â”‚    â€¢ Helmet â†’ Security headers                                   â”‚
â”‚    â€¢ CORS â†’ Check origin                                         â”‚
â”‚    â€¢ Morgan â†’ Log request                                        â”‚
â”‚    â€¢ express.json() â†’ Parse body                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. AUTHENTICATION MIDDLEWARE                                     â”‚
â”‚    â€¢ isAuthenticated() ejecuta                                   â”‚
â”‚    â€¢ Extract JWT from header                                     â”‚
â”‚    â€¢ jwt.verify(token, JWT_SECRET)                               â”‚
â”‚    â€¢ Decoded = { id: "507f1f77...", role: "admin" }             â”‚
â”‚    â€¢ User.findById(id)                                           â”‚
â”‚    â€¢ req.user = user                                             â”‚
â”‚    â€¢ next()                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. ROUTE MATCHED                                                 â”‚
â”‚    â€¢ /api/analytics/dashboard                                    â”‚
â”‚    â€¢ â†’ analyticsController.getDashboard                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 9. CONTROLLER EXECUTES                                           â”‚
â”‚    â€¢ Extract query params (startDate, endDate, branch)           â”‚
â”‚    â€¢ Build filters                                               â”‚
â”‚    â€¢ Execute multiple queries in parallel:                       â”‚
â”‚      â”œâ”€â–º Sale.aggregate([...]) â†’ KPIs                           â”‚
â”‚      â””â”€â–º Product.aggregate([...]) â†’ Stock info                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 10. DATABASE QUERIES (MongoDB)                                   â”‚
â”‚                                                                  â”‚
â”‚   Query 1: Sales KPIs                                            â”‚
â”‚   db.sales.aggregate([                                           â”‚
â”‚     { $match: { saleDate: {...}, status: "Completada" } },      â”‚
â”‚     { $group: {                                                  â”‚
â”‚         _id: null,                                               â”‚
â”‚         totalSales: { $sum: 1 },                                 â”‚
â”‚         totalRevenue: { $sum: "$totalAmount" },                  â”‚
â”‚         totalProfit: { $sum: "$totalProfit" },                   â”‚
â”‚         avgTicket: { $avg: "$totalAmount" }                      â”‚
â”‚       }                                                          â”‚
â”‚     }                                                            â”‚
â”‚   ])                                                             â”‚
â”‚                                                                  â”‚
â”‚   Query 2: Products Info                                         â”‚
â”‚   db.products.aggregate([                                        â”‚
â”‚     { $group: {                                                  â”‚
â”‚         _id: null,                                               â”‚
â”‚         totalProducts: { $sum: 1 },                              â”‚
â”‚         lowStockCount: { $sum: {                                 â”‚
â”‚           $cond: [{ $lte: ["$stock", "$minStock"] }, 1, 0]       â”‚
â”‚         }}                                                       â”‚
â”‚       }                                                          â”‚
â”‚     }                                                            â”‚
â”‚   ])                                                             â”‚
â”‚                                                                  â”‚
â”‚   â€¢ MongoDB ejecuta queries                                      â”‚
â”‚   â€¢ Usa Ã­ndices para performance                                 â”‚
â”‚   â€¢ Retorna resultados                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 11. CONTROLLER FORMATS RESPONSE                                  â”‚
â”‚   kpis = {                                                       â”‚
â”‚     totalSales: 250,                                             â”‚
â”‚     totalRevenue: 42500000,                                      â”‚
â”‚     totalProfit: 18200000,                                       â”‚
â”‚     avgTicket: 170000,                                           â”‚
â”‚     profitMargin: 42.82,                                         â”‚
â”‚     totalProducts: 60,                                           â”‚
â”‚     lowStockAlerts: 5                                            â”‚
â”‚   }                                                              â”‚
â”‚                                                                  â”‚
â”‚   res.status(200).json({ success: true, kpis })                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ HTTP Response
                     â”‚ Status: 200 OK
                     â”‚ Content-Type: application/json
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 12. FRONTEND RECEIVES RESPONSE                                   â”‚
â”‚   â€¢ Axios interceptor procesa                                    â”‚
â”‚   â€¢ response.data.kpis extraÃ­do                                  â”‚
â”‚   â€¢ .then() ejecuta                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 13. STATE UPDATE                                                 â”‚
â”‚   â€¢ setKpis(response.data.kpis)                                  â”‚
â”‚   â€¢ React detecta cambio de estado                               â”‚
â”‚   â€¢ Marca componente para re-render                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 14. RE-RENDER                                                    â”‚
â”‚   â€¢ Virtual DOM calcula diff                                     â”‚
â”‚   â€¢ Solo elementos afectados se actualizan                       â”‚
â”‚   â€¢ DOM real actualizado eficientemente                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 15. USER SEES UPDATED UI                                         â”‚
â”‚   â€¢ KPI Cards muestran nÃºmeros                                  â”‚
â”‚   â€¢ GrÃ¡ficos renderizan con Recharts                             â”‚
â”‚   â€¢ Animaciones se ejecutan                                      â”‚
â”‚   â€¢ Todo responsive y funcional                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TIEMPO TOTAL: ~500ms
```

---

## ğŸŒ Diagrama de Despliegue (Production)

### **Render Fullstack Deployment**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          INTERNET                                    â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        USERS                                  â”‚  â”‚
â”‚  â”‚  â€¢ Web Browsers (Chrome, Firefox, Safari)                     â”‚  â”‚
â”‚  â”‚  â€¢ Mobile Browsers (iOS, Android)                             â”‚  â”‚
â”‚  â”‚  â€¢ Desktop/Laptop/Tablet/Phone                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                         â”‚
â”‚                            â”‚ HTTPS (SSL/TLS)                         â”‚
â”‚                            â”‚ Port 443                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       RENDER.COM (Oregon)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  LOAD BALANCER / CDN                          â”‚  â”‚
â”‚  â”‚  â€¢ SSL Termination                                            â”‚  â”‚
â”‚  â”‚  â€¢ DDoS Protection                                            â”‚  â”‚
â”‚  â”‚  â€¢ Global CDN                                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                         â”‚
â”‚                            â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           WEB SERVICE (retail-analytics-fullstack)            â”‚  â”‚
â”‚  â”‚           Node.js 18 + Express                                â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  Instance Type: Free Tier                                     â”‚  â”‚
â”‚  â”‚  RAM: 512 MB                                                  â”‚  â”‚
â”‚  â”‚  CPU: Shared                                                  â”‚  â”‚
â”‚  â”‚  Disk: Ephemeral                                              â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  PROCESS 1: Node.js Server (PID 1)                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Express App                                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Port: 10000                                          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Handles:                                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    - API Requests (/api/*)                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    - Static Files (frontend/dist/)                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    - React Routing (/* â†’ index.html)                    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  Environment Variables:                                        â”‚  â”‚
â”‚  â”‚  â€¢ NODE_ENV=production                                         â”‚  â”‚
â”‚  â”‚  â€¢ MONGODB_URI=mongodb+srv://...                               â”‚  â”‚
â”‚  â”‚  â€¢ JWT_SECRET=***                                              â”‚  â”‚
â”‚  â”‚  â€¢ PORT=10000                                                  â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  Features:                                                     â”‚  â”‚
â”‚  â”‚  â€¢ Auto-deploy on git push                                     â”‚  â”‚
â”‚  â”‚  â€¢ Health check endpoint                                       â”‚  â”‚
â”‚  â”‚  â€¢ Automatic HTTPS                                             â”‚  â”‚
â”‚  â”‚  â€¢ Custom domain support                                       â”‚  â”‚
â”‚  â”‚  â€¢ Live logs                                                   â”‚  â”‚
â”‚  â”‚  â€¢ Shell access                                                â”‚  â”‚
â”‚  â”‚  â€¢ Sleep after 15 min (free tier)                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ MongoDB Driver
                              â”‚ Connection String
                              â”‚ mongoose.connect()
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MONGODB ATLAS (AWS - Oregon)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  CLUSTER: RetailCluster                       â”‚  â”‚
â”‚  â”‚                  Tier: M0 (Free)                              â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  Specs:                                                        â”‚  â”‚
â”‚  â”‚  â€¢ RAM: 512 MB                                                 â”‚  â”‚
â”‚  â”‚  â€¢ Storage: 512 MB                                             â”‚  â”‚
â”‚  â”‚  â€¢ Shared CPU                                                  â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  DATABASE: retail_inventory                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Collections:                                           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€â–º users (3 documents)                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€â–º products (60 documents)                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â–º sales (250 documents)                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Indexes:                                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ users: email (unique)                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ products: sku (unique), category, gender             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ sales: saleDate, branch, status                      â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  Features:                                                     â”‚  â”‚
â”‚  â”‚  â€¢ Automatic backups                                           â”‚  â”‚
â”‚  â”‚  â€¢ Point-in-time recovery                                      â”‚  â”‚
â”‚  â”‚  â€¢ IP Whitelist (0.0.0.0/0)                                    â”‚  â”‚
â”‚  â”‚  â€¢ User authentication                                         â”‚  â”‚
â”‚  â”‚  â€¢ Monitoring & alerts                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Traffic Flow**

```
User Request:
https://retail-analytics-fullstack.onrender.com/dashboard

    â†“ DNS Resolution
    â†“ SSL/TLS Handshake
    
Render Load Balancer
    â†“ Route to Web Service
    
Node.js Express Server
    â†“ Check request path
    
/dashboard (not /api/*)
    â†“ Serve static file
    
frontend/dist/index.html
    â†“ Return HTML + JS bundles
    
User's Browser
    â†“ Execute React code
    â†“ Make API call: GET /api/analytics/dashboard
    
Express API Routes
    â†“ Authentication middleware
    â†“ Controller function
    
MongoDB Atlas
    â†“ Execute query
    â†“ Return data
    
Express Response
    â†“ JSON data
    
React State Update
    â†“ Re-render
    
User sees dashboard âœ¨
```

---

## ğŸ“Š MÃ©tricas de Arquitectura

### **Performance:**
```
Frontend:
â€¢ First Paint: <1.5s
â€¢ Time to Interactive: <2.5s
â€¢ Bundle Size: ~200KB gzipped
â€¢ Components: 20+
â€¢ Routes: 5

Backend:
â€¢ API Response Time: <100ms
â€¢ Database Queries: <50ms
â€¢ Concurrent Requests: 100+
â€¢ Endpoints: 16+

Database:
â€¢ Collections: 3
â€¢ Documents: 313
â€¢ Indexes: 8
â€¢ Storage: ~50MB
```

### **Scalability:**
```
Horizontal:
â€¢ Render: Auto-scaling (paid tier)
â€¢ MongoDB: Replica sets available
â€¢ CDN: Global distribution

Vertical:
â€¢ Render: Upgradeable instances
â€¢ MongoDB: Cluster tiers M10-M200+
```

### **Reliability:**
```
â€¢ Uptime: 99.9% target
â€¢ Health checks: /health endpoint
â€¢ Error handling: Centralized
â€¢ Logging: Morgan + Render logs
â€¢ Backups: MongoDB automatic
```

---

## ğŸ¯ ConclusiÃ³n

Esta arquitectura proporciona:

âœ… **SeparaciÃ³n de Concerns** - MVC bien definido  
âœ… **Escalabilidad** - DiseÃ±o modular  
âœ… **Mantenibilidad** - CÃ³digo organizado  
âœ… **Performance** - Optimizaciones aplicadas  
âœ… **Seguridad** - MÃºltiples capas  
âœ… **Flexibilidad** - FÃ¡cil extender  

---

**Equipo:** Juliana, Isabela, Alejandro  
**PatrÃ³n Principal:** MVC  
**Capas:** PresentaciÃ³n â†’ AplicaciÃ³n â†’ Datos  
**Deploy:** Render (Fullstack) + MongoDB Atlas  

